# 内容定位修复

## 🎯 问题诊断
用户反馈：内容整体偏右，导致右侧没有空白边距，而左侧有大量空白边距。

## 🔍 根本原因
**双重边距偏移问题**：
1. `pageView.setIndent()` 已经为页面视图设置了左边距
2. `dx = pageAttr.leftMargin` 又为段落位置添加了左边距
3. 结果：内容被双重偏移，向右移动了两倍的左边距

## 📊 问题示例
假设页面宽度800px，左右边距各40px：

### 错误的定位（修复前）
```
pageView.setIndent(40, 40, 40, 40)  // 页面视图设置边距
dx = 40                             // 段落又添加40px偏移
实际内容起始位置 = 40 + 40 = 80px   // 双重偏移！
可用内容宽度 = 800 - 80 - 40 = 680px
```

### 正确的定位（修复后）
```
pageView.setIndent(40, 40, 40, 40)  // 页面视图设置边距
dx = 0                              // 段落从页面视图内部的0位置开始
实际内容起始位置 = 40 + 0 = 40px    // 正确偏移
可用内容宽度 = 800 - 40 - 40 = 720px
```

## ✅ 修复方案

### 代码修改
```java
// 修复前
int dx = pageAttr.leftMargin;  // 错误：双重偏移
int dy = pageAttr.topMargin;   // 错误：双重偏移

// 修复后
int dx = 0;  // 正确：页面视图已处理边距
int dy = 0;  // 正确：页面视图已处理边距
```

### 坐标系统说明
- **页面视图坐标系**: 页面视图通过`setIndent()`设置边距
- **段落坐标系**: 段落位置相对于页面视图内部，从(0,0)开始
- **最终显示**: 页面视图边距 + 段落相对位置 = 最终显示位置

## 📈 预期效果
1. **左右边距平衡**: 内容居中显示，左右边距相等
2. **正确的内容宽度**: 充分利用可用空间
3. **消除双重偏移**: 避免内容向右偏移过多
4. **保持页面边距**: 仍然保持正确的页面边距

## 🔧 调试信息
添加了详细的内容定位调试信息：
```
WPLayouter: Content positioning - dx: 0, dy: 0, spanW: 720, spanH: 1120, leftMargin: 40, rightMargin: 40
```

这个修复确保了内容在页面中正确居中，左右边距平衡。